---
interface Props {
  tech: {
    name: string;
    type?: string;
    description?: string;
  };
  workType: 'employment' | 'project';
}

const { tech, workType } = Astro.props;

// Define color classes based on technology type
const getTechColors = (type: string | null) => {
  if (!type) {
    // Default colors for backward compatibility
    return workType === 'employment' 
      ? 'text-blue-600 bg-blue-100 dark:bg-blue-900/20 dark:text-blue-400'
      : 'text-purple-600 bg-purple-100 dark:bg-purple-900/20 dark:text-purple-400';
  }
  
  switch (type) {
    case 'language_tech':
      return 'text-emerald-600 bg-emerald-100 dark:bg-emerald-900/20 dark:text-emerald-400';
    case 'framework_tooling':
      return 'text-blue-600 bg-blue-100 dark:bg-blue-900/20 dark:text-blue-400';
    case 'infra_platform':
      return 'text-orange-600 bg-orange-100 dark:bg-orange-900/20 dark:text-orange-400';
    case 'engineering_practice':
      return 'text-purple-600 bg-purple-100 dark:bg-purple-900/20 dark:text-purple-400';
    case 'architecture_pattern':
      return 'text-indigo-600 bg-indigo-100 dark:bg-indigo-900/20 dark:text-indigo-400';
    case 'system_capability':
      return 'text-rose-600 bg-rose-100 dark:bg-rose-900/20 dark:text-rose-400';
    case 'delivery_context':
      return 'text-slate-600 bg-slate-100 dark:bg-slate-900/20 dark:text-slate-400';
    default:
      return workType === 'employment' 
        ? 'text-blue-600 bg-blue-100 dark:bg-blue-900/20 dark:text-blue-400'
        : 'text-purple-600 bg-purple-100 dark:bg-purple-900/20 dark:text-purple-400';
  }
};
---

<div class="relative group">
  <span class={`inline-block px-3 py-1 text-xs font-medium rounded-full cursor-default ${getTechColors(tech.type || null)}`}>
    {tech.name}
  </span>
  
  {tech.description && (
    <div class="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 dark:bg-gray-100 text-white dark:text-gray-900 text-xs rounded-lg shadow-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none z-10 w-80">
      <div class="text-center leading-relaxed">{tech.description}</div>
      <div class="absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900 dark:border-t-gray-100"></div>
    </div>
  )}
</div> 