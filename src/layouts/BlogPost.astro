---
import Layout from './Layout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import Tag from '../components/Tag.astro';
import { formatDateLong, formatDateISO } from '../utils/date';

export interface Props {
	file: string;
	url: string;
	frontmatter: {
		title: string;
		description?: string;
		pubDate: Date;
		updatedDate?: Date;
		category?: string;
		tags?: string[];
		image?: string;
		canonicalURL?: string;
	};
}

const { 
	frontmatter: {
		title,
		description,
		pubDate = new Date(),
		category,
		tags = [],
		image,
		canonicalURL,
	}
} = Astro.props;

const formattedDate = formatDateLong(pubDate);
---

<Layout 
	title={title} 
	description={description} 
	image={image} 
	canonicalURL={canonicalURL}
>
	<div class="min-h-screen flex flex-col">
		<Header />
		
		<main class="flex-1">
			<article class="prose max-w-4xl mx-auto px-4 py-8 sm:px-6 lg:px-8">
				<!-- Article Header -->
				<header class="mb-8">
					<div class="mb-4">
						{category && (
							<Tag tag={category} type="category" href={`/category/${category.toLowerCase()}`} />
						)}
					</div>
					
					<h1 class="text-3xl font-bold text-gray-900 dark:text-white mb-4 leading-tight py-2">
						{title}
					</h1>
					
					{description && (
						<blockquote class="text-sm text-gray-600 dark:text-gray-300 mb-6 leading-relaxed">
							{description}
						</blockquote>
					)}
					
					<div class="flex items-center text-sm text-gray-500 dark:text-gray-400 space-x-4">
						<time datetime={formatDateISO(pubDate)}>
							Published {formattedDate}
						</time>
					</div>
					
					{tags.length > 0 && (
						<div class="mt-4 flex flex-wrap gap-2">
							{tags.map(tag => (
								<Tag tag={tag} href={`/tag/${tag.toLowerCase()}`} />
							))}
						</div>
					)}
				</header>
				
				<!-- Article Content -->
				<div class="prose prose-sm max-w-none prose-headings:text-gray-900 prose-headings:dark:text-white prose-p:text-gray-700 prose-p:dark:text-gray-300 prose-a:text-blue-600 prose-a:dark:text-blue-400 prose-strong:text-gray-900 prose-strong:dark:text-white prose-code:text-gray-900 prose-code:dark:text-white prose-pre:bg-gray-100 prose-pre:dark:bg-gray-800 prose-blockquote:border-l-blue-500 prose-blockquote:bg-blue-50 prose-blockquote:dark:bg-blue-900/20">
					<slot />
				</div>
				
				<!-- Article Footer -->
				<footer class="mt-12 pt-8 border-t border-gray-200 dark:border-gray-700">
					<div class="flex items-center justify-between">
						<div class="text-sm text-gray-500 dark:text-gray-400">
							<p>Thanks for reading! If you found this helpful, consider sharing it.</p>
						</div>
						<div class="flex space-x-4">
							<a 
								href={`https://twitter.com/intent/tweet?text=${encodeURIComponent(title)}&url=${encodeURIComponent(Astro.url.toString())}`}
								target="_blank"
								rel="noopener noreferrer"
								class="text-gray-400 hover:text-blue-500 transition-colors"
								aria-label="Share on Twitter"
							>
								<svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
									<path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
								</svg>
							</a>
							<a 
								href={`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(Astro.url.toString())}`}
								target="_blank"
								rel="noopener noreferrer"
								class="text-gray-400 hover:text-blue-600 transition-colors"
								aria-label="Share on LinkedIn"
							>
								<svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
									<path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
								</svg>
							</a>
						</div>
					</div>
				</footer>
			</article>
		</main>
		
		<Footer />
	</div>
</Layout> 